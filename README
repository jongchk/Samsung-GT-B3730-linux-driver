
************
How to build
************

In root dir:

* sh build.sh

In option directory:

* sh build.sh

****************
How to configure
****************

* Configure usb_modeswitch to not load the option driver by adding this line:

# Samsung GT-B3730. Skip loading option driver for this as we need special driver on one of the interfaces.
ATTRS{idVendor}=="04e8", ATTRS{idProduct}=="6889", GOTO="modeswitch_rules_end"

like this:

---------
KERNEL=="ttyUSB*", DRIVERS=="option1|usbserial", PROGRAM="/usr/sbin/usb_modeswitch_dispatcher --symlink-name %p", SYMLINK="%c"

# Samsung GT-B3730. Skip loading option driver for this as we need special driver on one of the interfaces.
ATTRS{idVendor}=="04e8", ATTRS{idProduct}=="6889", GOTO="modeswitch_rules_end"

SUBSYSTEM!="usb", GOTO="modeswitch_rules_end"
---------

in /lib/udev/rules.d/40-usb_modeswitch.rules (in Ubuntu)

(you need the rule for product "689a", but just the rule above for "6889")

* Set up wwan0 as dhcp interface. E.g. in Debian/Ubuntu, add this line to "/etc/network/interfaces":

iface wwan0 inet dhcp

**************
How to connect
**************

* sudo modprobe option && sudo rmmod option (to get module deps)
* sudo insmod ./option/option.ko
* Connect modem
* sudo modprobe usbnet
* sudo insmod ./gt_b3730.ko
* sh chat.sh
* sudo ifup wwan0

**************
How to reconnect
**************

* sudo ifdown wwan0
* Unplug and plug modem (bug in firmware, "ATE1" does not work. Same with windows driver).
* If /var/log/messages indicate error in driver, rmmod gt_b3730, then insmod again.
* sh chat.sh
* sudo ifup wwan0
