
************
How to build
************

Get the kalmia.c from https://github.com/mkotsbak/linux-2.6/blob/Samsung_kalmia_driver/drivers/net/usb/kalmia.c

Submitted patches for option.c are available as option_1.patch and option_2.patch in "option" subdir.
A full version of it for the current kernel:

https://github.com/mkotsbak/linux-2.6/blob/Samsung_kalmia_driver/drivers/usb/serial/option.c

In root dir:

* sh build.sh

In option directory:

* sh build.sh

****************
How to configure
****************

* In /etc/usb_modeswitch.d/04e8:689a, ensure this line is enabled:

  NoDriverLoading=1

There should be no rule for product="6889".

* Set up wwan0 as dhcp interface. E.g. in Debian/Ubuntu, add this line to "/etc/network/interfaces":

iface wwan0 inet dhcp

**************
How to connect
**************

* sudo modprobe option && sudo rmmod option (to get module deps)
* sudo insmod ./option/option.ko
* Connect modem
* sudo modprobe usbnet
* sudo insmod ./kalmia.ko
* sh chat.sh
* Monitor connection using: "minicom -o -D /dev/ttyUSB0" (NB! this seems to be required, else the modem stops)
* sudo ifup wwan0

**************
How to reconnect
**************

* sudo ifdown wwan0
* Unplug and plug modem (bug in firmware, "ATE1" does not work. Same with windows driver).
* If /var/log/messages indicate error in driver, rmmod kalmia, then insmod again.
* sh chat.sh
* sudo ifup wwan0
